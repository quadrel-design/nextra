import { buildDynamicMDX } from 'nextra/remote'
import { Callout, RemoteContent as MathJaxExample, MathJax, MathJaxContext } from 'nextra/components'

# LaTeX

Nextra uses [KaTeX](https://katex.org/) to render LaTeX expressions directly in MDX.
To enable LaTeX support, you must enable the `latex` option in your `next.config.mjs` file:

```js filename="next.config.mjs" {4}
import nextra from 'nextra'

const withNextra = nextra({
  latex: true
})

export default withNextra()
```

When enabled, KaTeX’s CSS and fonts will be automatically included in your site, and you can start writing math expressions in your MDX files. Using LaTeX within MDX is as simple as wrapping your expression in `$` or `$$`.

## Example

For example, the following Markdown code:

```md filename="page.md"
The **Pythagorean equation**: $a=\sqrt{b^2 + c^2}$.
```

will be rendered as:

<div className="mt-6 rounded-xl border border-gray-200 p-4 dark:border-gray-900">
  The **Pythagorean equation**: $a=\sqrt{b^2 + c^2}$.
</div>

You can still use [Markdown and MDX syntax](../markdown) in the same line as your LaTeX expression.

<Callout>
  If you want to display `$` in your content instead of rendering it as an
  equation, you can escape it with a backslash (`\`). For example `\$e = mc^2\$`
  will be rendered as \$e = mc^2\$.
</Callout>

## API

To learn more about KaTeX and its supported functions and conventions, visit
[KaTeX’s documentation](https://katex.org/docs/supported.html).

## MathJax

You can use MathJax as the math renderer instead of KaTeX, by providing an object with
`renderer: 'mathjax'`:

```js filename="next.config.mjs"
const withNextra = nextra({
  latex: {
    renderer: 'mathjax'
  }
})
```

<MathJaxExample components={{ MathJax, MathJaxContext }} />

```js filename="next.config.mjs" {4-12}
const withNextra = nextra({
  latex: {
    renderer: 'mathjax',
    options: {
      config: {
        tex: {
          macros: {
            RR: '\\mathbb{R}'
          }
        }
      }
    }
  }
})
```

export async function getStaticProps() {
  const rawMdx = `~~~math
\\int_2^3x^3\\,\\mathrm{d}x
~~~

You can also provide additional options, that will be passed to
[\`<MathJaxContext />\` component](https://github.com/fast-reflexes/better-react-mathjax#usage) as
\`config\` attribute.

For example macros \`$\\RR$\` will be rendered as $\\RR$, with following config:`
  const props = await buildDynamicMDX(
    rawMdx,
    {
      latex: {
        renderer: 'mathjax',
        options: {
          config: {
            tex: {
              macros: {
                RR: '\\mathbb{R}'
              }
            }
          }
        }
      },
    }
  )
  props.__nextra_dynamic_opts.title = 'LaTeX'
  return { props }
}
