import { Steps } from 'nextra/components'

# Search Engine

Nextra features full-page search, that includes list items, code blocks,
headings and table cells.

Check the
[migration guide](https://the-guild.dev/blog/nextra-4#new-search-engine--pagefind)
for more information.

## Setup

Nextra's search engine requires a few steps to set up:

<Steps>
### Install `pagefind` as a dev dependency

```sh npm2yarn
npm i -D pagefind
```

### Add a `postbuild` script

A `postbuild` script must be added to the `package.json` file to generate the
search index. The script should be:

```json filename="package.json"
"postbuild": "pagefind --site .next/server/app --output-path public/_pagefind"
```

For Static Exports, adjust to:

```json filename="package.json"
"postbuild": "pagefind --site .next/server/app --output-path out/_pagefind"
```

### Ignore genereated files

Add `_pagefind/` to `.gitignore`. This prevents committing the generated search
index files,

</Steps>

## Configuration

The search feature is enabled by default, but you can disable it entirely by
setting `search: false{:js}`:

```js filename="next.config.mjs" {4}
import nextra from 'nextra'

const withNextra = nextra({
  search: false
})
```

To keep search enabled but exclude code blocks, set
`search: { codeblocks: false }{:js}`:

```js filename="next.config.mjs" {4}
import nextra from 'nextra'

const withNextra = nextra({
  search: { codeblocks: false }
})
```
